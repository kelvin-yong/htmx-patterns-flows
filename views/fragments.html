{{ block "demo1-search-form" . }}
    <form hx-post="demo01-search" hx-target="this" hx-swap="outerHTML" hx-on:htmx:after-request="this.reset()">
            <div class="mb-3">
                <label for="nameInput" class="form-label">Name</label>
                <input type="text" class="form-control" id="nameInput" name="name" placeholder="Key in 'Error1' or 'Error2' for error">
                <div class="text-danger small mt-1">
                </div>
            </div>
            <div class="d-flex gap-2">
                <button type="reset" class="btn btn-secondary">Cancel</button>
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>
{{ end }}

{{ block "demo1-search-result" . }}
  <div class="container bg-white p-4 rounded shadow-sm">
    <h2 class="mb-4">User Information</h2>

    <!-- Key-Value List -->
    <div class="row mb-2">
      <div class="col-sm-4 fw-semibold">Name:</div>
      <div class="col-sm-8">{{ .name }}</div>
    </div>
    <div class="row mb-2">
      <div class="col-sm-4 fw-semibold">Email:</div>
      <div class="col-sm-8">{{ .name }}@example.com</div>
    </div>
    <div class="row mb-2">
      <div class="col-sm-4 fw-semibold">Role:</div>
      <div class="col-sm-8">Administrator</div>
    </div>
    <div class="row mb-2">
      <div class="col-sm-4 fw-semibold">Status:</div>
      <div class="col-sm-8 text-success">Active</div>
    </div>
    <div class="row mb-2">
      <div class="col-sm-4 fw-semibold">Last Login:</div>
      <div class="col-sm-8">August 22, 2025</div>
    </div>
    
    <button hx-on="click" hx-target="body" hx-get="/demo01" class="btn btn-secondary">Back</button>
    
  </div>
{{ end }}

{{ block "page-message" . }}
    {{ if .message }}
    <div id="pageMessage" class="alert alert-{{ .type}}" role="alert" hx-swap-oob="true">{{ .message}}</div>
    {{ else }}
    <div id="pageMessage" hx-swap-oob="true"></div>
    {{ end }}
{{ end }}

{{ block "demo2-search-form" . }}
    <form hx-post="demo02-search" hx-target="#search-result" 
    hx-indicator="#spinner"
    hx-validate="true"
    hx-on:htmx:before-request="htmx.find('#search-result').innerHTML=''"
    hx-disabled-elt="button">
            <div class="mb-3">
                <label for="nameInput" class="form-label">Name</label>
                <input type="text" class="form-control" id="nameInput" name="name" placeholder="Leave empty for error">
                <div class="text-danger small mt-1">
                </div>
            </div>
            <div class="mb-3">
                <label for="emailInput" class="form-label">Mobile: Last 4 digits</label>
                <input type="text" class="form-control" id="emailInput" name="mobile"
                pattern="\d{4,4}"
                placeholder="Your mobile number">
                <div class="text-danger small mt-1">
                </div>
            </div>
            <div class="d-flex gap-2">
                <button type="reset" class="btn btn-secondary">Cancel</button>
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>
{{ end }}

{{ block "demo2-search-result" . }}
    {{ if .name}}
    <hr>
    <h5>Results</h5>
    <ul class="list-group">
        <li class="list-group-item">{{ .name }} 1</li>
        <li class="list-group-item">{{ .name }} 2</li>
        <li class="list-group-item">{{ .name }} 3</li>
    </ul>
    {{ end }}
{{ end }}

{{ block "demo3-add-form" . }}
    <form 
        hx-post="{{.NextPostUrl}}" 
        hx-target="this" 
        hx-swap="outerHTML" 
        hx-push-url="{{.NextHistory}}"
    >
        <div class="mb-3">
            <label for="nameInput" class="form-label">What's your favourite {{ .ItemName}}?</label>
            <input type="text" class="form-control" id="nameInput" name="name" placeholder="Favourite Item">
            <div class="text-danger small mt-1">
            </div>
        </div>
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">Add</button>
        </div>
        <input type="hidden" name="item" value="{{.ItemName}}"/>
    </form>
{{ end }}

{{ block "page-title" . }}
    <h2 id="pageTitle" class="fw-bold mb-4" hx-swap-oob="true">{{ .title }}</h2>
{{ end }}

{{ block "multi-form" . }}
<form id="hx-order-form">

    <style>
        #form-wizard{
            display: flex;
            flex-direction: row;
            overflow-x: hidden;
        }

        .hidden {
            display: none;
        }
        .step{
            flex-direction: column;
            width: 100%;
            flex-shrink: 0;
        }
        .step-{{.curStep}} {
            display: inherit;
        }

        {{ if eq .direction "next"}}
        .htmx-added .step-{{.prevStep}} {
            display: inherit;
        }

        @keyframes slide-to-left {
            to { transform: translateX(-100%); }
        }

        .htmx-added .step {
            animation:  400ms both running slide-to-left;
        }
        {{ end }}

        {{ if eq .direction "prev"}}

        .htmx-added .step-{{.nextStep}} {
            display: inherit;
        }

        @keyframes slide-from-left {
            from { transform: translateX(-100%); }
        }

        .htmx-added .step {
            animation: 400ms both running slide-from-left;
        }
        {{ end }}
    </style>

    <input type="hidden" value="{{.curStep}}" name="step">
    <div id="form-wizard">
        <div class="mb-3 step-0 step hidden">
            <label for="input1" class="form-label">What's your favourite Food? (1/3)</label>
            <input type="text" class="form-control" id="input1" name="food" value="{{.food}}"placeholder="Favourite Food">
        </div>

        <div class="mb-3 step-1 step hidden">
            <label for="input2" class="form-label">What's your favourite Month? (2/3)</label>
            <input type="text" class="form-control" id="input2" name="month" value="{{.month}}" placeholder="Favourite Month">
        </div>

        <div class="mb-3 step-2 step hidden">
            <label for="input3" class="form-label">What's your favourite Colour? (3/3) </label>
            <input type="text" class="form-control" id="input3" name="colour" value="{{.colour}}" placeholder="Favourite Colour">
        </div>

        <div class="mb-3 step-3 step hidden">
            <h4>Here are your favourites</h4>
            <div>Food: {{.food}}</div>
            <div>Month: {{.month}}</div>
            <div>Colour: {{.colour}}</div>
        </div>
    </div>

    <div class="d-flex gap-2">
        <span>
            {{ if ne .curStep 0 }}
                <div id="submit-button-back"
                     hx-post="demo05/prev"
                     hx-target="#hx-order-form"
                     hx-swap="outerHTML settle:400ms"
                >
                    <button type="submit" class="btn btn-secondary">Back</button>
                </div>
            {{ end }}
        </span>


        <span id="submit-button-next"
             hx-post="demo05/next"
             hx-target="#hx-order-form"
             hx-swap="outerHTML settle:400ms"
        >
        
            {{ if eq .curStep 3 }}
                <button type="submit" class="btn btn-primary">Submit</button>
            {{ else }}
                <button type="submit" class="btn btn-primary">Next</button>
            {{ end }}
        </span>
    </div>
</form>
{{ end }}


{{ block "contact-item" . }}
{{ if not .Deleted}}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      {{ .Name }}
      <button 
        hx-delete="item-delete?id={{.Id}}"
        hx-confirm="Are you sure?"
        hx-target="closest li"
        hx-swap="delete"        
        class="btn btn-sm btn-outline-danger"
    >
        ‚ùå
      </button>
    </li>
{{ end }}
{{ end }}



{{ block "contact-list" . }}
<div class="container mt-5">
    <ul class="list-group">
    {{ range .ItemList }}
        {{ template "contact-item" .}}
    {{ end }}
    </ul>
</div>
{{ end }}
